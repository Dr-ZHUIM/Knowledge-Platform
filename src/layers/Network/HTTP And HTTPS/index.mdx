# HTTP ä¸Ž HTTPS çš„åŒºåˆ«

æœ¬æ–‡å°†è®¨è®ºä¸€ä¸ªç»å…¸é—®é¢˜ï¼šè¯·ä½ è¯´è¯´ HTTP ä¸Ž HTTPS çš„åŒºåˆ« :smile:

## çŸ¥è¯†å‰æ

### HTTP

#### Part I. HTTP æ˜¯ä»€ä¹ˆ?

HTTP (The HyperText Transfer Protocol è¶…æ–‡æœ¬ä¼ è¾“åè®®) æ˜¯ä¸€ä¸ªè®¾è®¡äºŽåœ¨è¿žæŽ¥çš„è®¾å¤‡ä¹‹é—´ä¼ è¾“ä¿¡æ¯çš„åº”ç”¨å±‚åè®® (ç½‘ç»œåè®®å±‚æ¬¡çš„é¡¶éƒ¨)

ç®€å•æè¿°ä¸€ä¸ª HTTP åè®®çš„ä½¿ç”¨æ¡ˆä¾‹: å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åŽæœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ä¿¡æ¯å†³å®šè¿”å›žçš„ä¿¡æ¯ã€‚

HTTP åè®®æ˜¯ä¸‡ç»´ç½‘çš„åŸºçŸ³ï¼Œä¹Ÿè¢«ç”¨äºŽè¶…æ–‡æœ¬è¿žæŽ¥ä»¥æ­¤è¯»å– web é¡µé¢ã€‚

#### Part II. HTTP è¯·æ±‚ æ˜¯ä»€ä¹ˆ?

HTTP è¯·æ±‚(request)æ˜¯æŒ‡å®¢æˆ·ç«¯ -- ä¸€èˆ¬æ˜¯æµè§ˆå™¨ -- å‘å‡ºçš„ä¿¡æ¯ï¼Œä¸Žä¹‹ç›¸å¯¹åº”çš„ç”±æœåŠ¡å™¨è¿”å›žçš„ç­”å¤è¢«ç§°ä¸º ç›¸åº”(response)

Each HTTP request made across the Internet carries with a series of encoded data.

A typical HTTP request contains:

- HTTP version type
- URL
- HTTP method
- HTTP headers
- Optional HTTP body

---

### HTTPS

#### Part I. What is HTTPS?

Before we start to learn what is `HTTPS`, we need to know what is `HTTP` first.

`HTTP`, HyperText Transfer Protocol, is the protocol used by your browser and web servers to communicate and exchange information.

When that exchange used `SSL` or `TLS`, we call it as `HTTPS`.

The '**S**' means '**Secure**'

#### Part II. Why Do We Need HTTPS?

We need HTTPS for three reasons :

- Privacy
- Integrity
- Identification

##### Privacy

HTTPS can hold your URL bar of your browser to tell you there is no crab watching your shoulder.

##### Integrity

HTTPS can ensure your communication is not being tampered with.

##### Identification

HTTPS can identify both of your goal website and your identity.

HTTPS will check the `digital signature` to identify the sender.

Additionally, HTTPS will check a `SSL certificate` and a `Certificate Authority (CA)` to identify the server.

#### Part III. Keys

HTTPs need a scenario to provide three serves as above on the web. This mechanism is called encryption.

Now, let's see what encrption algorithm is used for HTTPS.

##### Symmetric Key Algorithm ðŸ”‘

In this approach, there is one only key to encrypt and decrypt a message.

**Send Step:** sender send a message encrypted with the key

- sender send a message
- the message is encrypted by the encryption algorithm
- the encryption algorithm transfrom and spread out multiple times
- the message has been encrypted

**Receive Step** receiver decrypt the messagge with the same key above.

- get a encrypted message
- decrypt the message by the encryption algorithm with the same key
- the encryption algorithm transfrom and compress multiple times
- the message has been decrypted

**Tips:**

- anyone with the key can open the box, You have to be super careful with how you distribute the key.

##### Asymmetric Key Algorithm ðŸ”‘ðŸ”‘

The asymmetric key Algorithm provide two keys `Public Key`, `Private Key`.

You can share your `Public Key` to anyone.

The `Public Key` is in charge of the encryption

The `Private Key` is used to decrypt the message

**Significance:** This is great not only for privacy, but also for identification since we know for sure that only the owner of the 2 keys can open the message.

#### Part IV. The Handshake

When the browser communicates with a server, they both established a secure connection to transmit message.

But first, they needed to agree on how to communicate securely with a negotiation. If the negotiation is fail, your browser will show you a error or a warning. Vice versa.

The negotiation is called **handshake**

##### Client Side Handshake request

At first, the client side makes a handshake request by sending expressly to the server with a list of SSL/TLS versions and encryption algorithms that the client side can work with.

##### Server Side Handshake response

Secondly, the server side makes a negotiation response with a ensured SSL/TL version and encryption algorithm among the list which the client side send.
Additonally, sth server side will reply its certificate with its public key

##### Client Side's Certificate Validation and Key Exchange

Thirdly, the client side validates the certificate to make sure it is legit and generates a `"pre-master key"` by encrypting the public key the server side sended with symmetric key algorithm.  
The client side send this pre-master key to the server side.

##### Server Side Decrypts Pre-master Key

The server side decrypts the pre=-master key by the private key, then it gets a symmetric key

##### Both of Them Use the New Symmetric Key to Communicate

Now all data going back and forth between client side and server side is now secured for the rest of the session.

#### Part V. Certificates Authority

A certificate authority (CA) is a third-party organization with three steps:

- **Issuing certificates**
- **Confirming the identity of the owner**
- **Providing proof that the certificate is valid**

##### How to become a CA

Becoming a CA is an intense task of security requirements and audits.

You need to be trusted to be accepted into a root store.

A root store is basically a database of trusted CAs.

**Maybe, you can buy a root certificate.**

Apple, Windows, and Mozilla run their own root stores that they pre-install in your computer or device.

**Maybe, you can create a self-signed certificate**

A self-signed certificate provides the same level of encryption as one generated by an authority but almost every browser checks that the certificate is issued by a trusted authority.

> Self-signed certificates can be useful for testing, and intranets, but you should avoid using them on public sites.

##### Which Certificate Should You Buy?

- **Domain validated**
  The certificate just verifies the domain name, and nothing else. You probably need this one.
- **Organization validated**
  The certificate requires the validation and manual verification of the organization behind the certificate.
- **Extended validation**
  The certificate requires an exhaustive verification of the business.

##### How to verify the certificate?

When a CA issues a certificate, they sign the certificate with their root certificate pre-installed from the root-store. This validation will be aparted into several parts.

- Your browser connects to a site via HTTPS and downloads the certificate.
  - The certificate is a root certificate.
  - **Stop here**
- The certificate is not a root certificate.
- Your browser downloads the certificate that was used to sign the certificate on the site.
  - The certificate is a root certificate.
  - **Stop here**
- But this certificate is still not the root certificate.
- Your browser once more looks up the certificate that signed the intermediate certificate.
  - The certificate is a root certificate.
  - **Stop here**
- The last certificate is not a root certificate
- This chain is not trusted
